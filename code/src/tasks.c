#include "8051.h"
#include "interrupt_func.h"

unsigned int i = 0;
uchar j = 0;
extern unsigned int time;
uchar code sin_wave[] = {0x80,0x88,0x90,0x98,0xA0,0xA7,0xAF,0xB6,0xBD,0xC4,0xCB,0xD1,0xD7,0xDD,0xE2,0xE7,0xEC,0xF0,0xF3,0xF7,0xF9,0xFB,0xFD,0xFE,0xFF,0xFF,0xFF,0xFE,0xFC,0xFA,0xF8,0xF5,0xF2,0xEE,0xEA,0xE5,0xE0,0xDA,0xD5,0xCE,0xC8,0xC1,0xBA,0xB3,0xAB,0xA3,0x9C,0x94,0x8C,0x84,0x7B,0x73,0x6B,0x63,0x5C,0x54,0x4C,0x45,0x3E,0x37,0x31,0x2A,0x25,0x1F,0x1A,0x15,0x11,0x0D,0x0A,0x07,0x05,0x03,0x01,0x00,0x00,0x00,0x01,0x02,0x04,0x06,0x08,0x0C,0x0F,0x13,0x18,0x1D,0x22,0x28,0x2E,0x34,0x3B,0x42,0x49,0x50,0x58,0x5F,0x67,0x6F,0x77,0x7F};
void TIM0_50us() interrupt(TIM0_VECTOR)        
{
    i++;
    if(i>=time)
    {
        i = 0;
        P0 = sin_wave[j];
        j++;
        if(j==100)
            j = 0;
    }
    // max038
}

